<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition  template="/templates/clienteLayout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
               
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="contenido">
    <h:head>
        <title>Editar Reservaci贸n</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"/>
        <style>
            body {
                background: #111 !important;
                color: #C89B3C !important;
            }
            
            .dashboard-container {
                margin: 20px 0;
                padding: 20px;
                background: #1a1a1a;
                border: 1px solid #333;
                border-radius: 5px;
            }
            
            h2 {
                color: #C89B3C !important;
            }
            
            .nav-item {
                color: #eee !important;
                padding: 10px 18px;
                text-decoration: none !important;
                background: #262626;
                border-radius: 5px;
                transition: 0.2s;
                display: inline-block;
                border: none;
            }

            .nav-item:hover {
                background: #C89B3C !important;
                color: black !important;
                font-weight: bold;
            }
            
            a.nav-item {
                color: #eee !important;
                text-decoration: none !important;
            }
            
            a.nav-item:hover {
                background: #C89B3C !important;
                color: black !important;
                font-weight: bold;
            }
            
            .form-label {
                color: #C89B3C !important;
                font-weight: bold;
                margin-bottom: 8px;
            }
            
            .form-control,
            .form-select {
                background: #262626 !important;
                color: #eee !important;
                border: 1px solid #444 !important;
                padding: 10px 12px;
            }
            
            .form-control:focus,
            .form-select:focus {
                background: #262626 !important;
                color: #eee !important;
                border-color: #C89B3C !important;
                box-shadow: 0 0 5px rgba(200, 155, 60, 0.3);
                outline: none;
            }
            
            .btn-primary {
                background: #6D0823 !important;
                border-color: #6D0823 !important;
                color: white !important;
                padding: 10px 20px;
            }
            
            .btn-primary:hover {
                background: #C89B3C !important;
                border-color: #C89B3C !important;
                color: black !important;
                font-weight: bold;
            }
            
            .btn-secondary {
                background: #262626 !important;
                border-color: #333 !important;
                color: #C89B3C !important;
                padding: 10px 20px;
            }
            
            .btn-secondary:hover {
                background: #333 !important;
                color: #C89B3C !important;
            }
            
            .text-danger {
                color: #ff6b6b !important;
            }
            
            .form-text {
                color: #C89B3C !important;
                font-size: 12px;
            }
            
            /* Estilos para PrimeFaces Calendar */
            .ui-calendar {
                width: 100%;
            }
            
            .ui-calendar .ui-inputfield {
                background: #262626 !important;
                color: #eee !important;
                border: 1px solid #444 !important;
                padding: 10px 12px !important;
                width: 100% !important;
            }
            
            .ui-calendar .ui-inputfield:focus {
                border-color: #C89B3C !important;
                box-shadow: 0 0 5px rgba(200, 155, 60, 0.3) !important;
            }
        </style>
    </h:head>
    <h:body style="background-color: #111 !important;">
        <f:event type="preRenderView" listener="#{reservacionBean.listar()}" />
        
        <div class="dashboard-container">
            <!-- Bot贸n Men煤 Anterior arriba -->
            <div class="mb-3" style="margin-top: 20px;">
                <h:form>
                    <h:commandLink value="Men煤 Anterior"
                                   styleClass="nav-item"
                                   action="/faces/cliente/reservacion/index?faces-redirect=true" />
                </h:form>
            </div>
            
            <h2 class="text-center mb-4" style="color: #C89B3C !important;">Editar Reservaci贸n</h2>
            
            <h:form id="formReservacion">
                <p:messages id="messages" showDetail="true" closable="true" />
                
                <h:inputHidden value="#{reservacionBean.reservacion.id_reservacion}" />
                
                <div class="mb-3">
                    <h:outputLabel for="ocasion" value="Ocasi贸n:" styleClass="form-label" />
                    <h:inputText id="ocasion" value="#{reservacionBean.reservacion.ocasion}" 
                                styleClass="form-control" required="true" 
                                requiredMessage="La ocasi贸n es requerida" />
                    <h:message for="ocasion" styleClass="text-danger" />
                </div>
                
                <div class="mb-3">
                    <h:outputLabel for="cantidadPersonas" value="Cantidad de Personas (M谩ximo 44):" styleClass="form-label" />
                    <h:inputText id="cantidadPersonas" value="#{reservacionBean.reservacion.catindad_personas}" 
                                styleClass="form-control" required="true" 
                                requiredMessage="La cantidad de personas es requerida">
                        <f:convertNumber integerOnly="true" />
                        <f:validateLongRange minimum="1" maximum="44" />
                    </h:inputText>
                    <h:message for="cantidadPersonas" styleClass="text-danger" />
                    <small class="form-text">M谩ximo 44 personas</small>
                </div>
                
                <div class="mb-3">
                    <h:outputLabel for="cantidadMesas" value="Cantidad de Mesas (M谩ximo 11):" styleClass="form-label" />
                    <h:inputText id="cantidadMesas" value="#{reservacionBean.reservacion.cantidad_mesas}" 
                                styleClass="form-control" required="true" 
                                requiredMessage="La cantidad de mesas es requerida">
                        <f:convertNumber integerOnly="true" />
                        <f:validateLongRange minimum="1" maximum="11" />
                    </h:inputText>
                    <h:message for="cantidadMesas" styleClass="text-danger" />
                    <small class="form-text"> Recordatorio: Tiene 11 mesas disponibles</small>
                </div>
                
                <div class="mb-3">
                    <h:outputLabel for="fechaReservacion" value="Fecha de Reservaci贸n:" styleClass="form-label" />
                    <p:calendar id="fechaReservacion" value="#{reservacionBean.reservacion.fecha_reservacion}" 
                               pattern="dd/MM/yyyy" locale="es" showOn="button" 
                               mindate="#{reservacionBean.fechaHoy}"
                               styleClass="form-control" required="true" 
                               requiredMessage="La fecha de reservaci贸n es requerida" />
                    <h:message for="fechaReservacion" styleClass="text-danger" />
                </div>
                
                <div class="d-flex justify-content-between mt-4">
                    <h:commandButton value="Actualizar" action="#{reservacionBean.actualizar()}" 
                                   styleClass="btn btn-primary" />
                    <h:commandButton value="Cancelar" action="/faces/cliente/reservacion/index" 
                                   styleClass="btn btn-secondary" immediate="true" />
                </div>
            </h:form>
        </div>
    </h:body>
</ui:define>

</ui:composition>

