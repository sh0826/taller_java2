<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
                template="/templates/clienteLayout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="contenido">

    <h:head>
        <title>Administrar Reservaciones</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
              rel="stylesheet"/>
        <style>
            body {
                background: #111 !important;
                color: #C89B3C !important;
            }
            
            .dashboard-container {
                margin: 20px 0;
                padding: 20px;
                background: #1a1a1a;
                border: 1px solid #333;
                border-radius: 5px;
            }
            
            h2 {
                color: #C89B3C !important;
            }
            
            .nav-item {
                color: #eee;
                padding: 10px 18px;
                text-decoration: none;
                background: #262626;
                border-radius: 5px;
                transition: 0.2s;
                display: inline-block;
                border: none;
            }

            .nav-item:hover {
                background: #C89B3C;
                color: black;
                font-weight: bold;
            }
            
            .btn-primary {
                background: #6D0823 !important;
                border-color: #6D0823 !important;
                color: white !important;
            }
            
            .btn-primary:hover {
                background: #C89B3C !important;
                border-color: #C89B3C !important;
                color: black !important;
            }
            
            .btn-secondary {
                background: #262626 !important;
                border-color: #333 !important;
                color: #C89B3C !important;
            }
            
            .btn-secondary:hover {
                background: #333 !important;
                color: #C89B3C !important;
            }
      
            .tabla-dark th, .tabla-dark td {
                background-color: #111 !important;
                color: white !important;
                border: 1px solid #333 !important;
                padding: 12px;
                text-align: center;
            }

            .tabla-dark th {
                background-color: #000 !important;
                color: #C89B3C !important;
                font-weight: bold;
                font-size: 16px;
            }

            .tabla-dark tr:nth-child(even) td {
                background-color: #1a1a1a !important;
            }
            
            .tabla-dark tr:hover td {
                background-color: #262626 !important;
            }
            
            .text-info {
                color: #C89B3C !important;
            }
            
            .text-danger {
                color: #ff6b6b !important;
            }
        </style>
    </h:head>

    <h:body style="background-color: #111 !important;">

<div class="dashboard-container">
        

        <f:event type="preRenderView"
                 listener="#{reservacionBean.listar()}" />

        <h:form class="container">
            <!-- Botón Menú Anterior arriba -->
            <div class="mb-3" style="margin-top: 20px;">
                <h:commandLink value="Menú Anterior"
                               styleClass="nav-item"
                               action="/cliente/index?faces-redirect=true" />
            </div>
            
            <h2 class="text-center mb-4" style="color: #C89B3C !important;">Administrar Reservaciones</h2>

            <div class="mb-4 text-center" style="display: flex; justify-content: center; gap: 0;">
                <h:commandLink value="Crear una nueva Reservación"
                               styleClass="nav-item"
                               style="margin: 0; border-radius: 5px;"
                               action="/faces/cliente/reservacion/create" />
            </div>
            
            <br/><br/>

           
            <h:dataTable value="#{reservacionBean.lstReserv}"
             var="reserv"
             styleClass="tabla-dark w-100"
             headerClass="tabla-dark"
             rowClasses="tabla-dark">
             
    <h:column>
        <f:facet name="header">ID</f:facet>
        #{reserv.id_reservacion}
    </h:column>

    <h:column>
        <f:facet name="header">Ocasión</f:facet>
        #{reserv.ocasion}
    </h:column>

    <h:column>
        <f:facet name="header">Cantidad de Personas</f:facet>
        #{reserv.catindad_personas}
    </h:column>

    <h:column>
        <f:facet name="header">Cantidad de Mesas</f:facet>
        #{reserv.cantidad_mesas}
    </h:column>

    <h:column>
        <f:facet name="header">Fecha de Reservación</f:facet>
        <h:outputText value="#{reserv.fecha_reservacion}">
            <f:convertDateTime pattern="dd/MM/yyyy"/>
        </h:outputText>
    </h:column>

    <h:column>
        <f:facet name="header">Opciones</f:facet>

        <h:commandLink value="Editar"
                       styleClass="text-info fw-bold me-3"
                       actionListener="#{reservacionBean.buscar(reserv.id_reservacion)}"
                       action="editar"/>

        <h:commandLink value="Eliminar"
                       styleClass="text-danger fw-bold"
                       actionListener="#{reservacionBean.eliminar(reserv.id_reservacion)}"
                       onclick="return confirm('¿Está seguro de ELIMINAR la Reservación ID: #{reserv.id_reservacion}?');"/>
    </h:column>

</h:dataTable>

        </h:form>

</div>
    </h:body>

</ui:define>

</ui:composition>

