<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    template="/templates/clienteLayout.xhtml" xmlns:p="http://primefaces.org/ui">

    <ui:define name="contenido">
        <h:head>
            <title>Editar Boleta</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
                integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
                crossorigin="anonymous" />
            <style>
                body {
                    background: #111 !important;
                    min-height: 100vh;
                    padding: 15px 0;
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                }

                .card {
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
                    border: 1px solid #333;
                    border-radius: 8px;
                    background: #1a1a1a;
                }

                .card-header {
                    background: #000 !important;
                    color: #C89B3C !important;
                    border-radius: 8px 8px 0 0 !important;
                    padding: 12px 20px !important;
                }

                .card-body {
                    padding: 20px;
                    background: #1a1a1a;
                }

                .form-label {
                    font-size: 14px;
                    font-weight: 600;
                    color: #C89B3C !important;
                    margin-bottom: 5px;
                }

                .form-control,
                .form-select {
                    font-size: 13px;
                    padding: 8px 12px;
                    border: 1px solid #444;
                    border-radius: 4px;
                    background: #262626;
                    color: #eee;
                }

                .form-control:focus,
                .form-select:focus {
                    border-color: #C89B3C;
                    box-shadow: 0 0 5px rgba(200, 155, 60, 0.3);
                    outline: none;
                }

                .btn-primary {
                    background: #6D0823;
                    border: 1px solid #6D0823;
                    color: white;
                    padding: 8px 20px;
                    font-size: 13px;
                    font-weight: 600;
                }

                .btn-primary:hover {
                    background: #C89B3C;
                    border-color: #C89B3C;
                    color: black;
                }

                .btn-secondary {
                    background: #262626;
                    border: 1px solid #333;
                    color: #C89B3C;
                    padding: 8px 20px;
                    font-size: 13px;
                }

                .btn-secondary:hover {
                    background: #333;
                    color: #C89B3C;
                }

                .text-danger {
                    font-size: 11px;
                    color: #ff6b6b !important;
                }

                .form-text {
                    font-size: 12px;
                    color: #C89B3C !important;
                    font-style: italic;
                }

                h2 {
                    color: #C89B3C !important;
                }
            </style>
        </h:head>
        <h:body style="background-color: #111 !important;">
            <f:event type="preRenderView" listener="#{boletaBean.listarEven()}" />
            <div class="container" style="max-width: 600px; margin-top: 20px;">
                <div class="card">
                    <div class="card-header">
                        <h2 class="h5 mb-0" style="font-weight: 600; color: #C89B3C !important;">EDITAR BOLETA</h2>
                    </div>
                    <div class="card-body">
                        <h:form id="frmBoleta">
                            <p:messages id="messages" showDetail="true" closable="true" />
                            <h:inputHidden value="#{boletaBean.boleta.id_boleta}" />

                            <!-- EVENTO -->
                            <div class="mb-3">
                                <h:outputLabel value="Evento:" for="evento" styleClass="form-label" />
                                <h:selectOneMenu id="evento" value="#{boletaBean.boleta.id_evento}" class="form-select"
                                    required="true" requiredMessage="Debe seleccionar un Evento">
                                    <f:selectItem itemLabel="Seleccione un evento..." itemValue="" />
                                    <f:selectItems value="#{boletaBean.lstEven}" var="evento"
                                        itemLabel="#{evento.nombre_evento}" itemValue="#{evento.id_evento}" />
                                    <f:ajax listener="#{boletaBean.cargarPrecioEvento}" render="frmBoleta:precio" />
                                </h:selectOneMenu>
                            </div>

                            <!-- PRECIO -->
                            <div class="mb-3">
                                <h:outputLabel value="Precio:" for="precio" styleClass="form-label" />
                                <h:inputText id="precio" value="#{boletaBean.boleta.precio_boleta}" readonly="true"
                                    class="form-control">
                                    <f:convertNumber type="currency" currencySymbol="$" locale="es_CO" />
                                </h:inputText>
                            </div>

                            <!-- CANTIDAD -->
                            <div class="mb-3">
                                <h:outputLabel value="Cantidad de Boletos:" for="cantidad" styleClass="form-label" />
                                <h:inputText id="cantidad" value="#{boletaBean.boleta.cantidad_boletos}"
                                    class="form-control" required="true"
                                    requiredMessage="Debe especificar la Cantidad de Boletos" />
                                <h:message for="cantidad" class="text-danger" />
                            </div>

                            <!-- USUARIO -->
                            <div class="mb-3">
                                <h:outputLabel value="Usuario:" for="idUsuario" styleClass="form-label" />
                                <h:inputText id="idUsuario" value="#{boletaBean.usuarioNombre}" disabled="true"
                                    class="form-control" />
                                <h:message for="idUsuario" class="text-danger" />
                            </div>

                            <!-- BOTONES -->
                            <div class="d-flex justify-content-between mt-4">
                                <h:commandButton class="btn btn-primary" value="Actualizar"
                                    action="#{boletaBean.actualizar()}" />
                                <h:commandButton class="btn btn-secondary" value="Cancelar" action="index"
                                    immediate="true" />
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>
        </h:body>
    </ui:define>

</ui:composition>