<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Nueva Boleta</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"/>
</h:head>

<h:body>
    <h2 class="text-center text-success">Nueva Boleta</h2>
    <center>
        <h:form id="frmBoleta">
            <!-- Mensajes de error/Ã©xito -->
            <h:messages globalOnly="true" styleClass="alert alert-dismissible fade show" errorClass="alert-danger" infoClass="alert-success" warnClass="alert-warning" style="max-width: 600px; margin-bottom: 20px;" />

            <!-- IDs ocultos -->
            <h:inputHidden value="#{boletaBean.boleta.id_boleta}" />
            <h:inputHidden value="#{boletaBean.boleta.id_usuario}" />

            <h:panelGrid columns="2" cellpadding="6">

                <!-- EVENTO -->
                <h:outputLabel value="Evento:" for="evento" />
                <h:selectOneMenu id="evento"
                                 value="#{boletaBean.boleta.id_evento}"
                                 class="form-control">
                    <f:selectItem itemLabel="Seleccione un evento..." itemValue="-1" />
                    <f:selectItems value="#{boletaBean.lstEven}" 
                                   var="evento"
                                   itemLabel="#{evento.nombre_evento}" 
                                   itemValue="#{evento.id_evento}" />
                    <f:ajax listener="#{boletaBean.cargarPrecioEvento}"
                            render="precio" />
                </h:selectOneMenu>

                <!-- PRECIO -->
                <h:outputLabel value="Precio:" for="precio" />
                <h:inputText id="precio"
                             value="#{boletaBean.boleta.precio_boleta}"
                             readonly="true"
                             class="form-control"/>

                <!-- CANTIDAD -->
                <h:outputLabel value="Cantidad de Boletos:" for="cantidad" />
                <h:inputText id="cantidad"
                             value="#{boletaBean.boleta.cantidad_boletos}"
                             class="form-control"
                             required="true"
                             requiredMessage="Debe especificar la cantidad de boletos" />
                <h:message for="cantidad" class="text-danger" />

                <!-- USUARIO -->
                <h:outputLabel value="Usuario:" for="idUsuario" />
                <h:inputText id="idUsuario"
                             value="#{boletaBean.usuarioNombre}"
                             disabled="true"
                             class="form-control" />

                <!-- BOTONES -->
                <h:outputLabel />
                <h:panelGroup>
                    <h:commandButton class="btn btn-primary"
                                     value="Guardar"
                                     action="#{boletaBean.guardar}" />

                    <h:commandButton class="btn btn-secondary"
                                     value="Cancelar"
                                     action="index"
                                     style="margin-left: 15px;"
                                     immediate="true" />
                </h:panelGroup>

            </h:panelGrid>

        </h:form>
    </center>
</h:body>

</html>
